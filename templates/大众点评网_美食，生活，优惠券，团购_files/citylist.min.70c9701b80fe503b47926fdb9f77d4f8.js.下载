webpackJsonp([0,17],[function(e,i,t){e.exports=t(1)},function(e,i,t){"use strict";t(2);var n=t(3),s=t(4),c=t(5),a=t(7),r=t(8),o=(location.href.indexOf("51ping")!==-1?"//w.51ping.com":"//www.dianping.com","");n(document).ready(function(e){n(document).on("click",function(){n(".dp-provinces").removeClass("provinces-active"),n(".dp-cities").removeClass("provinces-active"),n(".suggest-city-containner").removeClass("provinces-active")}),o=n("#redirectURL").text(),p(n("#main").hasClass("inland")?"domestic":"foreign"),s()});var p=function(e){n("#main").hasClass("inland")?(a(n(".inland .province-choose"),"inland",o),c(n(".inland .search-text"),n(".inland"),e,o)):(r(n(".foreign .province-choose"),"foreign",o),c(n(".foreign .search-text"),n(".foreign"),e,o))}},function(e,i){},,function(e,i,t){"use strict";var n=t(3),s=function(){n(" .letter").on("click",function(){var e=n(this).index(),i=n(".letter-item").eq(e);i.length>0&&n("html,body").animate({scrollTop:""+i.offset().top})}),n(".findHeight").each(function(){n(this).height()<50&&n(this).parents(".letter-item").find(".more").hide()}),n(".more").on("click",function(){n(this).prev().css("height","auto"),n(this).hide(),n(this).next().show()}),n(".up").on("click",function(){n(this).prev().prev().css("height","48px"),n(this).hide(),n(this).prev(".more").show()})};e.exports=s},function(e,i,t){"use strict";var n=t(3),s=t(6),c=function(e,i,t,s){e.on("keyup",function(){var c=n(this).val().trim();if("domestic"===t){var r={keyword:c};c?n.ajax({url:"/ajax/citylist/searchDomesticCity",dataType:"json",type:"post",data:JSON.stringify(r),contentType:"application/json;charset=UTF-8",success:function(n){n&&n.result?a(n.result,e,i,s,t):a([],e,i,s,t)},error:function(e){console.log(e)}}):i.find(".suggest-city-containner").removeClass("provinces-active")}else if("foreign"===t){var o={keyword:c};c?n.ajax({url:"/ajax/citylist/searchOverseasCity",dataType:"json",type:"post",data:JSON.stringify(o),contentType:"application/json;charset=UTF-8",success:function(n){n&&n.result?a(n.result,e,i,s,t):a([],e,i,s,t)},error:function(e){console.log(e)}}):i.find(".suggest-city-containner").removeClass("provinces-active")}}),e.on("click",function(e){var t=n(this).val();t&&n("suggest-city-wapper").children()&&i.find(".suggest-city-containner").addClass("provinces-active"),e.stopPropagation()}),e.on("click",function(){i.find(".searchcity")&&n(this).val()&&i.find(".suggest-city-containner").addClass("provinces-active")})},a=function(e,i,t,n,c){var a=i;new s({input:a,data:e,parent:t,type:c,urlrules:n})};e.exports=c},function(e,i,t){"use strict";function n(e,i,t){var n=i.toLowerCase();if(n=n.replace(/\s*/g,""),"domestic"===t){var s=e.cityName,c=e.cityPyName,a=e.cityAbbrCode.toLowerCase();return s.indexOf(n)!==-1||c.indexOf(n)!==-1||a.indexOf(n)!==-1}if("foreign"===t){var r=e.cityName,o=e.cityEnName,p=e.cityPyName,d=e.cityAbbrCode.toLowerCase();return r.indexOf(n)!==-1||o.indexOf(n)!==-1||d.indexOf(n)!==-1||p.indexOf(n)!==-1}}function s(e,i,t){var s;return s=e?function(e,i){for(var s=[],c=0,a=e.length;c<a;c++){var r=e[c];n(r,i,t)&&s.push(r)}return s}(i,e):[i.slice(0,12)]}var c=t(3),a=function(e){this.data=e.data,this.input=e.input,this.parent=e.parent,this.urlrules=e.urlrules,this.type=e.type,this.initialize()};a.prototype.initialize=function(){var e=this,i=e.input.val().trim(),t=s(i,e.data,e.type);this._render(t,e.parent)},a.prototype._render=function(e,i){var t=this.urlrules,n="";i.find(".suggest-city-wapper").empty(),e.length<=0?n='<span class="no-result">未找到匹配城市</span>':c.each(e,function(e,i){if(t.indexOf("cityName")>0){var s=t.replace("{cityName}",i.cityEnName);n+='<a href="'+s+'" class="searchcity">'+i.cityName+"</a>"}else{var c=t.replace("{cityId}",i.cityId);n+='<a href="'+c+'" class="searchcity">'+i.cityName+"</a>"}}),i.find(".suggest-city-wapper").append(n),i.find(".suggest-city-containner").addClass("provinces-active")},e.exports=a},function(e,i,t){"use strict";var n=t(3),s=function(e,i,t){var s="";n.ajax({url:"/ajax/citylist/getAllDomesticProvince",dataType:"json",type:"post",success:function(i){n.each(i.provinceList,function(e,i){s+='<span class="dp-city dp-province" data-pc="'+i.provinceId+'">'+i.provinceName+"</span>"}),e.find(".provinces-wrapper").append(s)}}).then(function(){n("."+i+" .dp-province").on("click",function(){var e=n("."+i),s=n(this).data("pc");e.find(".text").text(n(this).text()),e.find(".city-choose ").css("cursor","pointer"),e.find(".dp-provinces").removeClass("provinces-active");var c="",a={provinceId:s};n.ajax({type:"post",url:"/ajax/citylist/getDomesticCityByProvince",data:JSON.stringify(a),dataType:"json",contentType:"application/json",success:function(s){var a=s.cityList;return n("."+i+" .cities-wrapper").empty(),n.each(a,function(e,i){if(t.indexOf("cityName")>0){var n=t.replace("{cityName}",i.cityEnName);c+='<a href="'+n+'" class="dp-city">'+i.cityName+"</a>"}else{var s=t.replace("{cityId}",i.cityId);c+='<a href="'+s+'" class="dp-city">'+i.cityName+"</a>"}}),n("."+i+" .cities-wrapper").append(c),e.find(".dp-provinces").removeClass("provinces-active"),!1}})})}),e.on("click",function(){return e.find(".provinces-active").length>0?n(this).find(".dp-provinces").removeClass("provinces-active"):(n("."+i).find(".dp-cities").removeClass("provinces-active"),n(this).find(".dp-provinces").addClass("provinces-active")),!1}),n("."+i+" .city-choose").on("click",function(e){"pointer"===n(this).css("cursor")&&(n(this).find(".provinces-active").length>0?n(this).find(".dp-cities").removeClass("provinces-active"):(n(this).find(".dp-cities").addClass("provinces-active"),n(".dp-provinces").removeClass("provinces-active")),e.stopPropagation())})};e.exports=s},function(e,i,t){"use strict";var n=t(3),s=function(e,i,t){var s="";n.ajax({url:"/ajax/citylist/getOverseasCountry",dataType:"json",type:"post",success:function(i){n.each(i.overseasCountryList,function(e,i){s+='<span class="dp-city dp-province" data-country="'+i.standardEnName+'" data-state="'+i.countryId+'">'+i.countryName+"</span>"}),e.find(".provinces-wrapper").append(s)}}).then(function(){n("."+i+" .dp-province").on("click",function(){var e=n("."+i),s=n(this).data("state");e.find(".text").text(n(this).text()),e.find(".city-choose ").css("cursor","pointer"),e.find(".dp-provinces").removeClass("provinces-active");var a="",r={countryId:s};n.ajax({type:"post",url:"/ajax/citylist/getOverseasCity",data:JSON.stringify(r),dataType:"json",contentType:"application/json",success:function(s){var r=s.overseasCityList;return n("."+i+" .cities-wrapper").empty(),a=c(r,t),n("."+i+" .cities-wrapper").append(a),e.find(".dp-provinces").removeClass("provinces-active"),!1}})})}),e.on("click",function(){return e.find(".provinces-active").length>0?n(this).find(".dp-provinces").removeClass("provinces-active"):(n("."+i).find(".dp-cities").removeClass("provinces-active"),n(this).find(".dp-provinces").addClass("provinces-active")),!1}),n("."+i+" .city-choose").on("click",function(e){"pointer"===n(this).css("cursor")&&(n(this).find(".provinces-active").length>0?n(this).find(".dp-cities").removeClass("provinces-active"):(n(this).find(".dp-cities").addClass("provinces-active"),n(".dp-provinces").removeClass("provinces-active")),e.stopPropagation())})},c=function(e,i){var t="";return n.each(e,function(e,n){if(i.indexOf("cityName")>0){var s=i.replace("{cityName}",n.cityEnName);t+='<a href="'+s+'" class="dp-city">'+n.cityName+"</a>"}else{var c=i.replace("{cityId}",n.cityId);t+='<a href="'+c+'" class="dp-city">'+n.cityName+"</a>"}}),t};e.exports=s}]);
//# sourceMappingURL=citylist.js.52a5a093e4b15cdd6430.map